/*
AwesomeGrid v2.0.0
https://github.com/kamalkhan/awesome-grid
A minimalist javascript library that allows you to display a responsive grid
layout stacked on top of each other into rows and columns.
The MIT License (MIT)
Copyright (c) 2015 M. Kamal Khan <shout@bhittani.com>
 */
(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};window.AwesomeGrid=function(){function e(t,n,s){var r,i,o,l,_,u,h,c,a;if(null==n&&(n=e.options),null==s&&(s=!1),this.__els=s?[t]:document.querySelectorAll(t),!this.__els)return this;for(c=this.__els,i=l=0,u=c.length;u>l;i=++l)for(o=c[i],o.style.position="relative",this.__kids[i]=o.children.length,a=o.children,_=0,h=a.length;h>_;_++)r=a[_],r.style.position="absolute",r.style.margin=0;this._reset(this._merge(e.options,n)),this._respond(),this._docontext(),this._doresize(),this._doscroll()}return e.prototype.__els=[],e.prototype.__kids=[],e.prototype.__watch=null,e.prototype.__adopt=!1,e.prototype.__width=null,e.prototype.__rows=[0],e.prototype.__columns=[0],e.prototype.__scroll={watch:null,fn:null},e.prototype.__devices=null,e.prototype.__current=null,e.prototype.__screen=null,e.prototype.__small=null,e.prototype.__mobile=null,e.prototype.__tablet=null,e.prototype.__desktop=null,e.prototype.__tv=null,e.prototype.__events=[],e.prototype.__context=null,e.options={context:"window",mobile:420,tablet:768,desktop:992,tv:1200},e.prototype._make=function(t,e){return{device:t,screen:e,columns:1,gutters:{column:0,row:0,force:!1}}},e.prototype._reset=function(t){return this.__context=t.context,this.__small=this._make("small",0),this.__mobile=this._make("mobile",t.mobile),this.__tablet=this._make("tablet",t.tablet),this.__desktop=this._make("desktop",t.desktop),this.__tv=this._make("tv",t.tv),this.__columns=[0],this.__devices=["small"],this.__current={}},e.prototype._device=function(e,n,s,r){var i,o;return this.__els?(n===!1?this.__devices=function(){var t,n,s,r;for(s=this.__devices,r=[],t=0,n=s.length;n>t;t++)o=s[t],o!==e&&r.push(o);return r}.call(this):(i=function(){switch(!1){case"tv"!==e:return this.__tv;case"desktop"!==e:return this.__desktop;case"tablet"!==e:return this.__tablet;case"mobile"!==e:return this.__mobile}}.call(this),i.columns=n,this.gutters(s,r,i),t.call(this.__devices,e)<0&&this.__devices.push(e)),this._respond()):this},e.prototype._respond=function(e){var n,s,r,i,o,l;if(null==e&&(e=window.innerWidth),o=function(e){return function(n,s){var r;return e.__screen=function(){switch(!1){case!(n>=this.__tv.screen):return this.__tv;case!(n>=this.__desktop.screen):return this.__desktop;case!(n>=this.__tablet.screen):return this.__tablet;case!(n>=this.__mobile.screen):return this.__mobile;default:return this.__small}}.call(e),r=e.__current.device,e.__current=function(){var e,n,s,r;switch(!1){case e=this.__screen.device,t.call(this.__devices,e)<0:return this.__screen;case!("tv"===this.__screen.device&&t.call(this.__devices,"tv")>=0):return this.__tv;case!(("tv"===(n=this.__screen.device)||"desktop"===n)&&t.call(this.__devices,"desktop")>=0):return this.__desktop;case!(("tv"===(s=this.__screen.device)||"desktop"===s||"tablet"===s)&&t.call(this.__devices,"tablet")>=0):return this.__tablet;case!(("tv"===(r=this.__screen.device)||"desktop"===r||"tablet"===r||"mobile"===r)&&t.call(this.__devices,"mobile")>=0):return this.__mobile;default:return this.__small}}.call(e),e.__current.device!==r&&e._emit("grid:device",null,[e.__current.device,r]),e.grid(!1,s)}}(this),"self"===this.__context){for(i=this.__els,l=[],s=0,r=i.length;r>s;s++)n=i[s],l.push(o(n.offsetWidth,[n]));return l}return o(e,this.__els)},e.prototype._docontext=function(){return"self"!==this.__context?null:(this._respond(),this.__watch=setTimeout(function(t){return function(){return t._docontext()}}(this),220))},e.prototype._doresize=function(){var t;return"self"===this.__context?null:(t=null,window.addEventListener("resize",function(e){return function(){return null==t?t=setTimeout(function(){return t=null,e._respond()},66):void 0}}(this),!0))},e.prototype._grow=function(){var t,e,n,s,r,i,o,l,_;if(null==this.__scroll.fn||null!=this.__scroll.watch)return this;for(i=this.__els,o=[],t=s=0,r=i.length;r>s;t=++s)e=i[t],l=getComputedStyle(e),n=parseInt(l.getPropertyValue("height")),document.body.scrollTop>=n+e.offsetTop-window.innerHeight?(this._emit("grid:scrolled",e,[this.__current.device]),this.__scroll.watch=!0,_=t,o.push(this.__scroll.fn(function(t){return function(){var n,s,r,i,o,l;if(!arguments.length||!arguments[0])return t.__scroll.watch=null,t;for(s=arguments[0].constructor===Array?arguments[0]:arguments,r=0,i=s.length;i>r;r++)n=s[r],o=e.children[0].tagName.toLowerCase(),l=document.createElement(o),l.innerHTML=n,e.appendChild(l);return t._sync(_),t.__scroll.watch=null}}(this)))):o.push(void 0);return o},e.prototype._doscroll=function(){var t;return t=null,window.addEventListener("scroll",function(e){return function(){return null==t?t=setTimeout(function(){return t=null,e._grow()},66):void 0}}(this),!0)},e.prototype._isInt=function(t){return null!=t&&!isNaN(t)&&function(t){return(0|t)===t}(parseFloat(t))},e.prototype._clone=function(t){var e,n;if(null==t||"object"!=typeof t)return t;n={};for(e in t)n[e]=this._clone(t[e]);return n},e.prototype._merge=function(t,e){var n,s,r;s=this._clone(t);for(n in e)r=e[n],s[n]=r;return s},e.prototype._x=function(t,e){var n,s;return n=1,s=t.getAttribute("data-ag-x"),this._isInt(s)&&(n=parseInt(s)),n>e?e:1>n?1:n},e.prototype._spacing=function(t){var e,n;return e={},n=getComputedStyle(t),e.pl=parseInt(n.paddingLeft),e.pr=parseInt(n.paddingRight),e.bl=parseInt(n.getPropertyValue("border-left-width")),e.br=parseInt(n.getPropertyValue("border-right-width")),e},e.prototype._giant=function(t,e){var n;return null==t&&(t=-1),null==e&&(e=-1),t===e&&t>-1?t:t===e&&-1===t?this.__columns.indexOf(Math.max.apply(null,this.__columns)):(n=this.__columns.slice(t,+e+1||9e9),t+n.indexOf(Math.max.apply(null,n)))},e.prototype._midget=function(t,e){var n;return null==t&&(t=-1),null==e&&(e=-1),t===e&&t>-1?t:t===e&&-1===t?this.__columns.indexOf(Math.min.apply(null,this.__columns)):(n=this.__columns.slice(t,+e+1||9e9),t+n.indexOf(Math.min.apply(null,n)))},e.prototype._clearClass=function(t){var e;return e=t.className.replace(/(?:^|\s)(ag-col-.+?)|(ag-row-.+?)(?!\S)/gim,""),""!==e&&(e=e.trim()+" "),e},e.prototype._emit=function(t,e,n){var s,r,i,o,l;for(o=this.__events,l=[],r=0,i=o.length;i>r;r++)s=o[r],l.push(s[0]===t?s[1].apply(e,[t].concat(n)):void 0);return l},e.prototype._gutters=function(t){var e;return this.__els&&null!=t?this._isInt(t)?{column:parseInt(t),row:parseInt(t)}:(e={column:this.__small.gutters.column,row:this.__small.gutters.row},this._isInt(t.column)&&(e.column=parseInt(t.column)),this._isInt(t.row)&&(e.row=parseInt(t.row)),e):this},e.prototype._grid=function(e,n,s,r){var i,o,l,_,u,h,c,a,p,d,f,m,g,v,y;for(null==r&&(r=!1),r&&(n.style.position="absolute",n.style.margin=0),i=this._midget(),f=this._x(n,s),i+f>s&&(i-=i+f-s),u=i*this.__width+i*this.__current.gutters.column,y=f*this.__width+(f-1)*this.__current.gutters.column,d=this._spacing(n),g=this._giant(i,i+f-1),n.style.width=y-d.pl-d.pr-d.bl-d.br+"px",n.style.top=this.__columns[g]+"px",n.style.left=u+"px",n.className=this._clearClass(n),this.__columns[g]=this.__columns[g]+n.offsetHeight+this.__current.gutters.row,m="",v=[],l=[],p=[],o=_=h=i,c=i+f-1;c>=h?c>=_:_>=c;o=c>=h?++_:--_)n.className+=m+"ag-col-"+(o+1),a=this.__rows[o],t.call(v,a)<0&&(n.className+=" ag-row-"+(this.__rows[o]+1)),v.push(this.__rows[o]),this.__rows[o]++,m=" ",this.__columns[o]=this.__columns[g],l.push(o+1),p.push(this.__rows[o]);return e.style.height=this.__columns[this._giant()]+"px",this._emit("item:stacked",n,[e,p,l,this.__current.device])},e.prototype._sync=function(t){var e,n,s,r,i,o,l;if(r=this.__kids[t],n=this.__els[t].children.length,n>r){for(this.__kids[t]=n,l=[],e=s=i=r,o=n;o>=i?o>s:s>o;e=o>=i?++s:--s)l.push(this._grid(this.__els[t],this.__els[t].children[e],this.__columns.length,!0));return l}},e.prototype.gutters=function(t,e,n){var s;return null==e&&(e=!1),null==n&&(n=this.__small),this.__els?(s=this._gutters(t),n.gutters={column:s.column,row:s.row,force:e?!0:!1},this):this},e.prototype.grid=function(t,e){var n,s,r,i,o,l,_,u,h;if(null==e&&(e=this.__els),!this.__els)return this;if(t&&(this.__small.columns=t),s=this.__current,t=s.columns,!this._isInt(t))return this;for(o=0,_=e.length;_>o;o++){for(r=e[o],this.__columns=function(){var e,n,s;for(s=[],e=1,n=t;n>=1?n>=e:e>=n;n>=1?e++:e--)s.push(0);return s}(),this.__rows=this.__columns.slice(0),i=this._clone(s.gutters),i.force||this.gutters(r.getAttribute("data-ag-gutters")||{column:r.getAttribute("data-ag-gutters-column"),row:r.getAttribute("data-ag-gutters-row")},s),this.__width=(r.offsetWidth-(t-1)*s.gutters.column)/t,h=r.children,l=0,u=h.length;u>l;l++)n=h[l],this._grid(r,n,t);s.gutters=i,this._emit("grid:done",r,[s.device])}return this},e.prototype.apply=function(){var t,e,n,s,r;for(r=this.__kids,t=e=0,s=r.length;s>e;t=++e)n=r[t],this._sync(t);return this},e.prototype.scroll=function(t){return t===!1?(this.__scroll.fn=null,this.__scroll.watch=null,this):"function"!=typeof t?this:(this.__scroll.fn=t,this)},e.prototype.mobile=function(t,e,n){return null==e&&(e={}),null==n&&(n=!1),this._device("mobile",t,e,n),this},e.prototype.tablet=function(t,e,n){return null==e&&(e={}),null==n&&(n=!1),this._device("tablet",t,e,n),this},e.prototype.desktop=function(t,e,n){return null==e&&(e={}),null==n&&(n=!1),this._device("desktop",t,e,n),this},e.prototype.tv=function(t,e,n){return null==e&&(e={}),null==n&&(n=!1),this._device("tv",t,e,n),this},e.prototype.on=function(t,e){return"function"!=typeof e?this:(this.__events.push([t,e]),this)},e.prototype.off=function(t,e){var n,s,r,i,o,l;if(null==e&&(e=null),null==t)return this.__events=[],this;for(r=[],l=this.__events,n=i=0,o=l.length;o>i;n=++i)s=l[n],(s[0]!==t||null!=e&&e.toString()!==s[1].toString())&&r.push(s);return this.__events=r,this},e}(),window.addEventListener("load",function(){var t,e,n,s,r;for(s=document.querySelectorAll("[data-awesome-grid]"),r=[],e=0,n=s.length;n>e;e++)t=s[e],r.push(new AwesomeGrid(t,AwesomeGrid.options,!0).grid(t.getAttribute("data-awesome-grid")));return r},!0),"function"==typeof window.define&&window.define.amd&&window.define("AwesomeGrid",[],function(){return window.AwesomeGrid})}).call(this);
